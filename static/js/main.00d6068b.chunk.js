(this["webpackJsonpinteractive-book-editor"]=this["webpackJsonpinteractive-book-editor"]||[]).push([[0],{101:function(e,t,a){e.exports=a(225)},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},114:function(e,t,a){},175:function(e,t){},177:function(e,t){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(95),r=a.n(c),i=(a(106),a(4)),s=(a(107),a(21),a(27)),o=a(17),m=(a(108),l.a.memo((function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],r=a[1];Object(n.useEffect)((function(){var t=e.pathName;r(t)}),[e.pathName]);var o=function(e,t){return l.a.createElement(s.b,{to:t},l.a.createElement("div",{className:"link"},e))};return l.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"navbar-header"},l.a.createElement("a",{className:"navbar-brand",href:"#"},l.a.createElement("img",{src:"".concat("/interactive-book-editor","/images/temp_logo.png"),className:"logo-img"}))),[{text:"About",to:"/about"},{text:"Upload a New Book File",to:"/upload"},{text:"Edit Book Triggers",to:"/edit"},{text:"Contact Us",to:"/contact"}].map((function(e,t){var a=e.text,n=e.to;return l.a.createElement("li",{key:t},n===c?function(e){return l.a.createElement("div",{className:"link-active"},e)}(a):o(a,n))})),l.a.createElement("ul",{className:"nav navbar-nav"}),l.a.createElement("ul",{className:"nav navbar-nav navbar-right"},l.a.createElement("li",null,o("Login","/login")))))}))),u=a(60),d=a.n(u),b=a(98),E=(a(114),a(99)),f=a.n(E),p=l.a.memo((function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),o=Object(i.a)(s,2),m=o[0],u=o[1],E=Object(n.useState)(null),p=Object(i.a)(E,2),v=p[0],N=p[1],h=function(){var t=Object(b.a)(d.a.mark((function t(){var a,n,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.next=3,v.arrayBuffer();case 3:return a=t.sent,t.next=6,f.a.convertToHtml({arrayBuffer:a});case 6:n=t.sent,l=n.value,e.setBookContent(l);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"menu-bg"},l.a.createElement("div",{className:"menu-window"},l.a.createElement("div",{className:"menu"},l.a.createElement("h4",{className:"menu-header"},"Welcome to Interactive Book Editer!"),l.a.createElement("label",{className:"mr-1"},"Choose a docx file: "),l.a.createElement("div",{className:"custom-file mb-2"},l.a.createElement("input",{type:"file",className:"custom-file-input",id:"inputGroupFile01",onChange:function(e){var t=e.target.files[0].name;/.*.docx/.test(t)?(N(e.target.files[0]),r("")):(N(null),r("Please only select a file ending with .docx"))}}),l.a.createElement("label",{className:"custom-file-label"},v?v.name:"Choose file"),l.a.createElement("li",null,l.a.createElement("h6",null,l.a.createElement("span",{className:"badge badge-danger mt-2",hidden:!c},c)))),l.a.createElement("button",{onClick:h,className:"btn btn-success form-control mt-3",disabled:m||!v},m?"Please wait...":"Load Book")))))})),v=a(100),N=(a(222),l.a.memo((function(e){var t="line line-text ".concat(e.line.header?"header":""),a="line add-img ".concat(e.line.header?"header":"");return l.a.createElement("div",{className:"row"},l.a.createElement("img",{className:a,src:"".concat("/interactive-book-editor","/images/add.png")}),l.a.createElement("div",{className:t},l.a.createElement("label",{dangerouslySetInnerHTML:{__html:e.line.html}})))}))),h=(a(223),0),g=1,k=0,j=1,x=2,O=0,C=1,w=2,y=["strong","em","u","i","b"],S=l.a.memo((function(e){return l.a.createElement("div",{className:"wrapper side-bar p-0 pt-4 m-0"},l.a.createElement("nav",{id:"sidebar",className:"fixed-pos row p-0 m-0"},l.a.createElement("ul",{className:"list-unstyled col"},l.a.createElement("div",null,l.a.createElement("h3",null,l.a.createElement("b",null,"Edit Book"))),l.a.createElement("li",null,l.a.createElement("div",{className:"side-bar-item col"},l.a.createElement("label",{className:"side-bar-item-text"},"Mark Chapter Headers"))),l.a.createElement("li",null,l.a.createElement("div",{className:"side-bar-item col"},l.a.createElement("label",{className:"dropdown-toggle side-bar-item-text"},"Display")),l.a.createElement("ul",{className:"list-unstyled",id:"homeSubmenu"},l.a.createElement("li",null,l.a.createElement("div",{onClick:function(){return e.setDisplay(h)},className:"side-bar-item-sub col".concat(e.display===h?" selected":"")},l.a.createElement("label",{className:"side-bar-item-sub-text"},"Whole Book"))),l.a.createElement("li",null,l.a.createElement("div",{onClick:function(){return e.setDisplay(g)},className:"side-bar-item-sub col".concat(e.display===g?" selected":"")},l.a.createElement("label",{className:"side-bar-item-sub-text"},"Current Chapter"))))),l.a.createElement("li",null,l.a.createElement("div",{className:"side-bar-item col"},l.a.createElement("label",{className:"dropdown-toggle side-bar-item-text"},"Split by")),l.a.createElement("ul",{className:"list-unstyled",id:"homeSubmenu"},l.a.createElement("li",null,l.a.createElement("div",{onClick:function(){return e.setSplitPattern(O)},className:"side-bar-item-sub col".concat(e.splitPattern===O?" selected":"")},l.a.createElement("label",{className:"side-bar-item-sub-text"},"Sentences"))),l.a.createElement("li",null,l.a.createElement("div",{onClick:function(){return e.setSplitPattern(C)},className:"side-bar-item-sub col".concat(e.splitPattern===C?" selected":"")},l.a.createElement("label",{className:"side-bar-item-sub-text"},"Lines"))))),l.a.createElement("li",null,l.a.createElement("div",{className:"side-bar-item col"},l.a.createElement("label",{className:"dropdown-toggle side-bar-item-text"},"Filter")),l.a.createElement("ul",{className:"list-unstyled"},l.a.createElement("li",null,l.a.createElement("div",{onClick:function(){return e.setFilter(k)},className:"side-bar-item-sub col".concat(e.filter===k?" selected":"")},l.a.createElement("label",{className:"side-bar-item-sub-text"},"None"))),l.a.createElement("li",null,l.a.createElement("div",{onClick:function(){return e.setFilter(j)},className:"side-bar-item-sub col".concat(e.filter===j?" selected":"")},l.a.createElement("label",{className:"side-bar-item-sub-text"},"View Headers"))),l.a.createElement("li",null,l.a.createElement("div",{onClick:function(){return e.setFilter(x)},className:"side-bar-item-sub col".concat(e.filter===x?" selected":"")},l.a.createElement("label",{className:"side-bar-item-sub-text"},"View Trigger Lines"))))),l.a.createElement("li",null,l.a.createElement("div",{className:"side-bar-item col"},l.a.createElement("label",{className:"side-bar-item-text"},"Save Checkpoint"))),l.a.createElement("li",null,l.a.createElement("div",{className:"side-bar-item last col"},l.a.createElement("label",{className:"side-bar-item-text"},"Choose Another Book"))))))})),$=(a(224),l.a.memo((function(e){var t=e.bookContent,a=Object(n.useState)(null),c=Object(i.a)(a,2),r=(c[0],c[1]),s=Object(n.useState)(null),o=Object(i.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(h),b=Object(i.a)(d,2),E=b[0],f=b[1],p=Object(n.useState)(k),g=Object(i.a)(p,2),j=g[0],x=g[1],C=Object(n.useState)(O),$=Object(i.a)(C,2),B=$[0],F=$[1],P=Object(n.useState)(!!t),W=Object(i.a)(P,2),L=W[0],D=W[1],H=function(e){return/>chapter/i.test(e)||/^chapter/i.test(e)||/>episode/i.test(e)||/^episode/i.test(e)},T=function(e,t){var a="<".concat(t,">"),n="</".concat(t,">");return e.startsWith(a)&&!e.endsWith(n)?e+=n:!e.startsWith(a)&&e.endsWith(n)&&(e=a+e),e},I=function(){var e=t.split("</p><p>").map((function(e){return e.split(". ").join(".<p>").split(/<\/?p>/).filter((function(e){return""!==e}))}));e=e.map((function(e){return function(e){for(var t=[],a=[],n=0;n<e.length;n++){a[n]=[];for(var l=e[n].split(/<\/?/).join("%%<"),c=(l=l.split(">").join(">%%")).split("%%"),r=[],i=0;i<c.length;i++){var s=c[i].match(Object(v.a)(/<((u)|(s)|(i)|(em)|(strong))>/,{tagName:1}));if(s){if(s.groups){var o=s.groups.tagName,m=t.indexOf(o);m>-1?t.splice(m,1):t.push(o)}}else""!==c[i]&&r.push({text:c[i],tags:[].concat(t)})}a[n].push([].concat(r))}return a}(e)})),r(e)},M=function(){var a=(B===O?t.split("</p><p>").join("<p>".concat("#--&--$--+@#$&&*&^&*^$@@@@$--!!#$%^&^&$@#$@$&^^&**(*(@@@$#","</p>")).split(". ").join(".<p>"):B===w?(console.warn("Not implemented paragraph division"),e.bookContent):e.bookContent).split(/<\/?p>/).filter((function(e){return""!==e}));(a=a.map((function(e){return{html:e,header:H(e),triggers:[]}}))).map((function(e){return function(e){for(var t=0;t<y.length;t++)e.html=T(e.html,y[t]);return e}(e)})),u(a)};Object(n.useEffect)((function(){t&&(D(!0),I(),D(!1))}),[t]),Object(n.useEffect)((function(){t&&(D(!0),M(),D(!1))}),[t,B]);return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"side-bar-bg floating-col"},l.a.createElement(S,{display:E,filter:j,setDisplay:f,setFilter:x,splitPattern:B,setSplitPattern:F})),l.a.createElement("div",{className:"side-bar-mock-filler floating-col"}),l.a.createElement("div",{className:"main-edit-area floating-col"},m?m.map((function(e,t){return function(e,t){return"#--&--$--+@#$&&*&^&*^$@@@@$--!!#$%^&^&$@#$@$&^^&**(*(@@@$#"==e.html?l.a.createElement("div",{className:"line-separator",key:-t}):l.a.createElement(N,{line:e,key:t,index:t})}(e,t)})):L?l.a.createElement("div",null,"Loading book content..."):l.a.createElement("div",null,"No book content to edit. Please use the upload page to upload a book file.")))))}))),B=l.a.memo((function(e){var t=Object(o.f)(),a=e.setPathName,c=e.setBookContent,r=e.bookContent;return Object(n.useEffect)((function(){a(t.pathname)}),[t,a]),l.a.createElement(n.Fragment,null,l.a.createElement(o.b,{exact:!0,path:"/edit"},l.a.createElement($,{bookContent:r})),l.a.createElement(o.b,{exact:!0,path:"/upload"},l.a.createElement(p,{setBookContent:c})),l.a.createElement(o.a,{exact:!0,from:"/",to:r?"/edit":"/upload"}))})),F=l.a.memo((function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),u=Object(i.a)(r,2),d=u[0],b=u[1];return Object(n.useEffect)((function(){var e=(console.warn("Not implemented getBookContentFromServer. Returning null."),null);c(e)}),[]),l.a.createElement(n.Fragment,null,l.a.createElement(s.a,null,l.a.createElement(m,{pathName:d}),l.a.createElement("div",{className:"header-space"}),l.a.createElement(o.b,{path:"/"},l.a.createElement(B,{setPathName:b,bookContent:a,setBookContent:c}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement("div",{className:"container-fluid BookEditorContainer"},l.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[101,1,2]]]);
//# sourceMappingURL=main.00d6068b.chunk.js.map